<p-toast position="top-right"></p-toast>
<div class="carrito-container" style="margin: auto; padding: 2rem">
  <div
    class="carrito-header"
    style="
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    "
  >
    <h2 style="margin: 0"><i class='pi pi-shopping-cart' style='font-size: 2rem; color: #9d4edd;'></i> Mi Carrito</h2>

    <p-button
      icon="pi pi-trash"
      label="Vaciar Carrito"
      (onClick)="vaciarCarrito()"
      styleClass="p-button-danger"
    ></p-button>
  </div>

  @if(carrito.length > 0) {
        <p style="margin: 0.3rem 0; color: #e0e0e0; font-weight: 500; font-size: 1.5rem; justify-self: center;">
      {{ totalItems }} {{ totalItems === 1 ? 'item' : 'items' }} | Total: {{ totalPrecio | currency }}
    </p>
<div class="tabla-carrito-wrapper">
  <p-table [value]="carrito" styleClass="p-datatable-hoverable" class="tabla-carrito">
    <ng-template pTemplate="header">
      <tr>
        <th>Juego</th>
        <th>Precio</th>
        <th>Acciones</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-item>
      <tr>
        <td>{{ item.nombre }}</td>
        <td>{{ item.precio | currency }}</td>
        <td>
          <p-button
            label="Eliminar"
            icon="pi pi-times"
            styleClass="p-button-danger p-button-rounded p-button-sm"
            (onClick)="eliminarJuego(item.id)"
          ></p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

  } @else {

<p-card [styleClass]="'p-d-flex p-flex-column p-ai-center p-jc-center'"
        header="Carrito Vacío"
        [style]="{'max-width': '400px', 'margin': '5rem auto', 'text-align': 'center'}">
  <p [style]="{'font-weight': '600', 'margin-bottom': '1rem'}">
    No has agregado ningún juego todavía.
  </p>
  <a href="/home"><p-button [label]="'Ir a la tienda'" icon="pi pi-shopping-cart" [styleClass]="'p-mt-3'"></p-button></a>
</p-card>


  }
</div>
